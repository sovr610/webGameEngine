<script type="text/javascript" lang="JavaScript" src="https://rawgit.com/daurnimator/lua.vm.js/master/dist/lua.vm.js"></script>
  <script type="text/lua" lang="Lua" id="luascript">
  local function main()
    local co, sync = coroutine.running ()
    local request = _G.js.new (_G.window.XMLHttpRequest)
    request:open ("GET", "/html/sandbox.html", true)
    local result, err
    request.onreadystatechange = function (event)
      if request.readyState == 4 then
        if request.status == 200 then
          result = request.responseText
        else
          err    = event.status
        end
        coroutine.resume (co)
      end
    end
    request:send ()
    coroutine.yield ()
  end
  local co = coroutine.create (main)
  coroutine.resume (co)
  </script>
